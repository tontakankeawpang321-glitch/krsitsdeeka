<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>‡πÄ‡∏°‡∏ô‡∏π‡πÅ‡∏õ‡∏£‡∏£‡∏π‡∏õ‡∏≠‡∏≤‡∏´‡∏≤‡∏£ ‚Äì Industrial AI</title>
<link href="https://fonts.googleapis.com/css2?family=Kodchasan:wght@400;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>

<style>
  :root {
    /* ‚úÖ Industrial Theme Color Palette (New) */
    --bg: #e5e7eb;          /* ‡∏™‡∏µ‡πÄ‡∏ó‡∏≤‡∏Ñ‡∏≠‡∏ô‡∏Å‡∏£‡∏µ‡∏ï */
    --card: #ffffff;        /* ‡∏Ç‡∏≤‡∏ß‡∏™‡∏∞‡∏≠‡∏≤‡∏î */
    --ink: #1f2937;         /* ‡πÄ‡∏ó‡∏≤‡πÄ‡∏Ç‡πâ‡∏°‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡∏î‡∏≥ (Charcoal) */
    --muted: #6b7280;       /* ‡πÄ‡∏ó‡∏≤‡∏Å‡∏•‡∏≤‡∏á */
    --line: #d1d5db;        /* ‡πÄ‡∏™‡πâ‡∏ô‡∏Ç‡∏≠‡∏ö‡πÇ‡∏•‡∏´‡∏∞ */
    --accent: #f59e0b;      /* ‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏° (Safety Yellow) */
    --accent-hover: #d97706;/* ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏° */
    --radius: 6px;          /* ‡∏°‡∏∏‡∏°‡∏°‡∏ô‡∏ô‡πâ‡∏≠‡∏¢‡∏•‡∏á ‡πÉ‡∏´‡πâ‡∏î‡∏π‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á‡πÅ‡∏ö‡∏ö‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô */
    --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  }
  
  * { box-sizing: border-box; }
  
  body {
    margin: 0;
    background-color: var(--bg);
    color: var(--ink);
    font-family: 'Kodchasan', system-ui, sans-serif;
    /* Pattern ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏ö‡∏ö‡∏ï‡∏∞‡πÅ‡∏Å‡∏£‡∏á‡πÄ‡∏´‡∏•‡πá‡∏Å‡∏à‡∏≤‡∏á‡πÜ */
    background-image: radial-gradient(#d1d5db 1px, transparent 1px);
    background-size: 20px 20px;
  }

  .wrap {
    max-width: 1100px;
    margin: auto;
    padding: 30px 20px 100px;
  }

  .header-box {
    text-align: center;
    margin-bottom: 30px;
    background: var(--card);
    padding: 20px;
    border-radius: var(--radius);
    border-left: 5px solid var(--accent);
    box-shadow: var(--shadow);
  }

  .title {
    font-weight: 700;
    font-size: clamp(24px, 5vw, 32px);
    margin: 0;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--ink);
  }
  
  .hint {
    color: var(--muted);
    font-size: 14px;
    margin-top: 8px;
  }

  /* ‚úÖ Search Bar Industrial Style */
  .search-wrapper {
    position: relative;
    max-width: 600px;
    margin: 0 auto 30px;
  }
  .search-bar {
    display: flex;
    align-items: center;
    background: var(--card);
    border: 2px solid var(--line);
    border-radius: var(--radius);
    padding: 0 16px;
    height: 50px;
    transition: all 0.2s;
  }
  .search-bar:focus-within {
    border-color: var(--accent);
    box-shadow: 0 0 0 4px rgba(245, 158, 11, 0.1);
  }
  .search-bar svg {
    color: var(--muted);
    width: 20px;
    height: 20px;
  }
  .search-bar input {
    width: 100%;
    border: none;
    outline: none;
    background: transparent;
    font-family: 'Kodchasan', sans-serif;
    font-size: 16px;
    color: var(--ink);
    margin-left: 10px;
    height: 100%;
  }

  /* ‚úÖ Grid Layout */
  .grid {
    display: grid;
    gap: 12px;
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  }
  
  /* ‚úÖ Item Button Style (Label Tag Style) */
  .item {
    position: relative;
    display: flex;
    align-items: center;
    padding: 14px 16px;
    border-radius: var(--radius);
    border: 1px solid var(--line);
    background: var(--card);
    font-size: 15px;
    font-weight: 600;
    color: var(--ink);
    box-shadow: var(--shadow);
    cursor: pointer;
    transition: all 0.15s ease;
    text-align: left;
    overflow: hidden;
  }
  
  /* ‡πÅ‡∏ñ‡∏ö‡∏™‡∏µ‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏° */
  .item::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 4px;
    background-color: var(--line);
    transition: background-color 0.2s;
  }

  .item:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    border-color: var(--accent);
  }
  
  .item:hover::before {
    background-color: var(--accent);
  }

  .item:active {
    transform: translateY(0);
  }
  
  .num {
    font-family: monospace;
    margin-right: 12px;
    font-weight: 700;
    color: var(--muted);
    font-size: 14px;
    opacity: 0.7;
    padding-left: 6px;
  }

  .item-name {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  footer {
    text-align: center;
    margin-top: 40px;
    color: var(--muted);
    font-size: 13px;
  }

  /* ===== CSS ‡∏Ç‡∏≠‡∏á Chatbot UI (Industrial Theme) ===== */
  .chat-bubble::before { content: ''; position: absolute; width: 0; height: 0; border-style: solid; }
  .chat-bubble-user::before {
    border-width: 0 12px 12px 12px; border-color: transparent transparent #f59e0b transparent; /* Safety Yellow */
    top: -10px; right: 12px;
  }
  .chat-bubble-model::before {
    border-width: 0 12px 12px 12px; border-color: transparent transparent #e5e7eb transparent;
    top: -10px; left: 12px;
  }
  .gemini-thinking-bar {
    position: relative; width: 100%; height: 4px; background-color: #e0e0e0;
    border-radius: 2px; overflow: hidden;
  }
  .gemini-thinking-bar::before {
    content: ''; position: absolute; top: 0; left: 0; height: 100%; width: 100%;
    background: linear-gradient(90deg, #f59e0b, #fbbf24, #f59e0b);
    background-size: 200% 100%; animation: thinking-gradient 2s linear infinite;
  }
  @keyframes thinking-gradient { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
  
  #fab-chat-toggle {
    position: fixed; bottom: 25px; right: 25px;
    width: 60px; height: 60px;
    background-color: #f59e0b; /* Safety Yellow */
    color: #1f2937; /* Dark Text for Contrast */
    border: none; border-radius: 50%;
    font-size: 28px; line-height: 60px; text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    cursor: pointer; z-index: 998;
    transition: transform 0.2s, opacity 0.3s;
    font-family: 'Kodchasan', sans-serif;
    border: 2px solid #fff;
  }
  #fab-chat-toggle:hover { transform: scale(1.05); background-color: #fbbf24; }
  
  #chatbot-modal {
    position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
    z-index: 1000; transition: opacity 0.3s, transform 0.3s;
    opacity: 1; transform: translateY(0); pointer-events: auto;
  }
  #chatbot-modal.chatbot-hidden {
    opacity: 0; transform: translateY(100%); pointer-events: none;
  }
</style>
</head>
<body>

<div class="wrap">
  <div class="header-box">
    <div class="title">üè≠ ‡πÄ‡∏°‡∏ô‡∏π‡πÅ‡∏õ‡∏£‡∏£‡∏π‡∏õ‡∏≠‡∏≤‡∏´‡∏≤‡∏£</div>
    <p class="hint">‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ñ‡∏ô‡∏≠‡∏°‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏£‡∏£‡∏π‡∏õ‡∏ú‡∏•‡∏ú‡∏•‡∏¥‡∏ï‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏©‡∏ï‡∏£</p>
  </div>

  <div class="search-wrapper">
    <div class="search-bar">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
      <input type="search" id="searchInput" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏°‡∏ô‡∏π (‡πÄ‡∏ä‡πà‡∏ô ‡πÅ‡∏´‡∏ô‡∏°, ‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡∏â‡∏≤‡∏ö)...">
    </div>
  </div>

  <div class="grid" id="grid"></div>

  <footer>
    <p class="footer-links">
      ¬© 2025 Crow Studio |
      <a href="https://sites.google.com/view/privacy-policy-pdpa-crow-studi/%E0%B8%AB%E0%B8%99%E0%B8%B2%E0%B9%81%E0%B8%A3%E0%B8%81">‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</a> |
      <a href="‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏Ç‡πâ‡∏≠‡∏ï‡∏Å‡∏•‡∏á">‡∏Ç‡πâ‡∏≠‡∏ï‡∏Å‡∏•‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</a>
    </p>
  </footer>
</div>

<button id="fab-chat-toggle" title="‡∏ñ‡∏≤‡∏°‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç">Ai</button>

<div id="chatbot-modal" class="chatbot-hidden">
  <div class="flex flex-col h-screen bg-gray-100">
    <header class="bg-[#1f2937] text-white p-4 flex justify-between items-center shadow-md border-b-4 border-[#f59e0b]">
      <div class="flex items-center gap-2">
          <span class="text-2xl">ü•´</span>
          <div>
            <h1 class="text-lg font-bold font-sans text-white m-0">AI ‡πÅ‡∏õ‡∏£‡∏£‡∏π‡∏õ‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h1>
            <p class="text-xs text-gray-400 m-0">‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏ñ‡∏ô‡∏≠‡∏°‡∏≠‡∏≤‡∏´‡∏≤‡∏£ & ‡πÅ‡∏û‡πá‡∏Ñ‡πÄ‡∏Å‡∏à‡∏à‡∏¥‡πâ‡∏á</p>
          </div>
      </div>
      <div>
        <button id="new-chat-btn" class="bg-[#f59e0b] hover:bg-[#d97706] text-[#1f2937] font-bold py-1 px-3 rounded mr-2 text-sm">
          ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà
        </button>
        <button id="chatbot-close-btn" class="bg-gray-700 hover:bg-gray-600 text-white font-bold py-1 px-3 rounded text-sm">
          ‡∏õ‡∏¥‡∏î
        </button>
      </div>
    </header>

    <main id="chat-history" class="flex-1 overflow-y-auto p-4 space-y-4 bg-[#e5e7eb]">
      <div class="flex items-start space-x-2">
        <span class="text-2xl">ü§ñ</span>
        <div class="chat-bubble chat-bubble-model bg-white text-gray-800 p-3 rounded-lg max-w-lg relative border border-gray-200 shadow-sm">
          <p>‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ú‡∏°‡∏Ñ‡∏∑‡∏≠ AI ‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏î‡πâ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏£‡∏£‡∏π‡∏õ‡πÅ‡∏•‡∏∞‡∏ñ‡∏ô‡∏≠‡∏°‡∏≠‡∏≤‡∏´‡∏≤‡∏£ ‡∏´‡∏≤‡∏Å‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏™‡∏á‡∏™‡∏±‡∏¢‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏π‡∏ï‡∏£ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥ ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏±‡∏Å‡∏©‡∏≤ ‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö</p>
        </div>
      </div>
    </main>

    <div id="thinking-indicator" class="p-4 hidden bg-[#e5e7eb]">
      <div class="flex items-center space-x-2">
        <span class="text-2xl">ü§ñ</span>
        <div class="chat-bubble chat-bubble-model bg-white text-gray-800 p-3 rounded-lg max-w-lg relative border border-gray-200">
          <div class="gemini-thinking-bar"></div>
        </div>
      </div>
    </div>

    <footer class="bg-white p-3 shadow-inner border-t border-gray-200 m-0 w-full max-w-full">
      <div class="flex space-x-2">
        <input id="user-input" type="text" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° (‡πÄ‡∏ä‡πà‡∏ô ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏≥‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡∏ï‡∏≤‡∏Å)..." class="flex-1 p-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#f59e0b] font-sans text-base text-gray-800">
        <button id="send-btn" class="bg-[#f59e0b] hover:bg-[#d97706] text-[#1f2937] font-bold py-2 px-4 rounded-xl shadow-sm">
          ‡∏™‡πà‡∏á
        </button>
      </div>
    </footer>
  </div>
</div>

<script>
/* =========================
   1. ‡∏™‡πà‡∏ß‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£ (List Logic)
   ========================= */
const BASE_URL = "https://sites.google.com/view/panrobtang";

const items = [
  "‡∏Ç‡πâ‡∏≤‡∏ß‡πÄ‡∏Å‡∏£‡∏µ‡∏¢‡∏ö‡∏ü‡∏±‡∏Å‡∏ó‡∏≠‡∏á","‡∏Ç‡πâ‡∏≤‡∏ß‡πÄ‡∏Å‡∏£‡∏µ‡∏¢‡∏ö‡∏Å‡∏∏‡πâ‡∏á","‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡πÄ‡∏Ñ‡πá‡∏°","‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå","‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡πÅ‡∏ú‡πà‡∏ô","‡∏ô‡πâ‡∏≥‡∏û‡∏£‡∏¥‡∏Å‡∏ô‡∏£‡∏Å","‡∏ô‡πâ‡∏≥‡∏û‡∏£‡∏¥‡∏Å‡πÄ‡∏ú‡∏≤‡∏°‡∏±‡∏ô‡πÄ‡∏ó‡∏®‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°",
  "‡∏ô‡πâ‡∏≥‡∏û‡∏£‡∏¥‡∏Å‡πÄ‡∏ú‡∏≤‡∏Å‡∏≤‡∏Å‡∏ñ‡∏±‡πà‡∏ß‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á","‡∏ã‡∏≠‡∏™‡∏û‡∏£‡∏¥‡∏Å","‡∏ã‡∏≠‡∏™‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠‡πÄ‡∏ó‡∏®","‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏¢‡∏≠‡∏á","‡πÑ‡∏Å‡πà‡∏´‡∏¢‡∏≠‡∏á","‡∏´‡∏°‡∏π‡∏´‡∏¢‡∏≠‡∏á","‡πÅ‡∏´‡∏ô‡∏°","‡πÑ‡∏™‡πâ‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏õ‡∏µ‡πâ‡∏¢‡∏ß","‡∏Å‡∏∏‡∏ô‡πÄ‡∏ä‡∏µ‡∏¢‡∏á",
  "‡πÑ‡∏Ç‡πà‡πÄ‡∏Ñ‡πá‡∏°","‡πÑ‡∏Ç‡πà‡πÄ‡∏Ñ‡πá‡∏°‡∏û‡∏£‡∏≠‡∏Å","‡∏ô‡πâ‡∏≥‡∏õ‡∏•‡∏≤","‡∏õ‡∏•‡∏≤‡∏£‡πâ‡∏≤","‡∏õ‡∏•‡∏≤‡πÄ‡∏à‡πà‡∏≤","‡∏õ‡∏•‡∏≤‡∏à‡πà‡∏≠‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏•‡∏≤‡∏™‡πâ‡∏°","‡∏Ç‡∏¥‡∏á‡∏î‡∏≠‡∏á","‡∏ú‡∏±‡∏Å‡∏î‡∏≠‡∏á‡∏ú‡∏™‡∏°","‡∏°‡∏∞‡∏´‡∏ô‡∏≤‡∏ß‡∏î‡∏≠‡∏á‡πÄ‡∏Ñ‡πá‡∏°",
  "‡∏°‡∏∞‡∏´‡∏ô‡∏≤‡∏ß‡∏î‡∏≠‡∏á‡∏´‡∏ß‡∏≤‡∏ô","‡∏ú‡∏±‡∏Å‡∏Å‡∏≤‡∏î‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏õ‡∏•‡∏µ‡∏î‡∏≠‡∏á‡πÄ‡∏õ‡∏£‡∏µ‡πä‡∏¢‡∏ß","‡∏´‡∏ô‡πà‡∏≠‡πÑ‡∏°‡πâ‡∏≠‡∏±‡∏î‡∏Ç‡∏ß‡∏î","‡∏°‡∏∞‡∏°‡πà‡∏ß‡∏á‡∏î‡∏≠‡∏á","‡πÄ‡∏´‡πá‡∏î‡∏ü‡∏≤‡∏á‡∏î‡∏≠‡∏á‡∏™‡∏≤‡∏°‡∏£‡∏™","‡∏ï‡∏±‡πâ‡∏á‡∏â‡πà‡∏≤‡∏¢","‡∏ï‡∏±‡πâ‡∏á‡∏â‡πà‡∏≤‡∏¢‡∏°‡∏∞‡∏•‡∏∞‡∏Å‡∏≠",
  "‡∏ô‡πâ‡∏≥‡∏™‡πâ‡∏°‡∏™‡∏≤‡∏¢‡∏ä‡∏π","‡∏ô‡πâ‡∏≥‡∏™‡πâ‡∏°‡∏™‡∏≤‡∏¢‡∏ä‡∏π‡∏à‡∏≤‡∏Å‡∏ô‡πâ‡∏≥‡∏°‡∏∞‡∏û‡∏£‡πâ‡∏≤‡∏ß","‡∏ô‡πâ‡∏≥‡∏™‡πâ‡∏°‡∏™‡∏≤‡∏¢‡∏ä‡∏π‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏Å‡∏™‡∏±‡∏õ‡∏õ‡∏∞‡∏£‡∏î","‡πÑ‡∏ß‡∏ô‡πå‡∏™‡∏±‡∏õ‡∏õ‡∏∞‡∏£‡∏î","‡πÑ‡∏ß‡∏ô‡πå‡∏Å‡∏£‡∏∞‡πÄ‡∏à‡∏µ‡πä‡∏¢‡∏ö","‡πÑ‡∏ß‡∏ô‡πå‡∏≠‡∏á‡∏∏‡πà‡∏ô",
  "‡πÅ‡∏õ‡πâ‡∏á‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏Ç‡πâ‡∏≤‡∏ß‡∏´‡∏°‡∏≤‡∏Å","‡∏°‡∏∞‡∏Ç‡∏≤‡∏°‡πÅ‡∏Å‡πâ‡∏ß","‡∏™‡∏±‡∏õ‡∏õ‡∏∞‡∏£‡∏î‡∏Å‡∏ß‡∏ô","‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠‡πÄ‡∏ó‡∏®‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÅ‡∏´‡πâ‡∏á","‡πÄ‡∏ú‡∏∑‡∏≠‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏±‡∏ô‡∏Å‡∏ß‡∏ô","‡∏°‡∏∞‡∏•‡∏∞‡∏Å‡∏≠‡∏™‡∏∏‡∏Å‡∏Å‡∏ß‡∏ô","‡∏ñ‡∏±‡πà‡∏ß‡πÄ‡∏Ñ‡∏•‡∏∑‡∏≠‡∏ö‡πÇ‡∏≠‡∏ß‡∏±‡∏•‡∏ï‡∏¥‡∏ô",
  "‡∏°‡∏∞‡∏°‡πà‡∏ß‡∏á‡∏™‡∏≤‡∏¢‡∏£‡∏∏‡πâ‡∏á","‡πÅ‡∏¢‡∏°‡∏™‡∏±‡∏õ‡∏õ‡∏∞‡∏£‡∏î","‡πÅ‡∏¢‡πâ‡∏°‡∏°‡∏∞‡∏•‡∏∞‡∏Å‡∏≠‡∏î‡∏¥‡∏ö","‡πÅ‡∏¢‡∏°‡∏™‡πâ‡∏°‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏´‡∏ß‡∏≤‡∏ô","‡∏ô‡πâ‡∏≥‡πÄ‡∏ï‡πâ‡∏≤‡∏´‡∏π‡πâ","‡∏ü‡∏≠‡∏á‡πÄ‡∏ï‡πâ‡∏≤‡∏´‡∏π‡πâ","‡πÄ‡∏ï‡πâ‡∏≤‡∏´‡∏π‡πâ‡πÅ‡∏Ç‡πá‡∏á","‡πÄ‡∏ï‡πâ‡∏≤‡∏Æ‡∏ß‡∏¢",
  "‡∏Ç‡πâ‡∏≤‡∏ß‡∏ï‡∏π‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏Å‡∏ñ‡∏±‡πà‡∏ß‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á","‡∏Å‡∏≤‡∏Å‡∏ñ‡∏±‡πà‡∏ß‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏Å‡∏ß‡∏ô","‡∏ô‡πâ‡∏≥‡∏°‡∏∞‡∏Ç‡∏≤‡∏°‡πÄ‡∏õ‡∏µ‡∏¢‡∏Å","‡∏ô‡πâ‡∏≥‡∏°‡∏∞‡∏¢‡∏°","‡∏ô‡πâ‡∏≥‡∏Å‡∏£‡∏∞‡πÄ‡∏à‡∏µ‡πä‡∏¢‡∏ö","‡∏ô‡πâ‡∏≥‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠‡πÄ‡∏ó‡∏®","‡∏ô‡πâ‡∏≥‡∏û‡∏∏‡∏ó‡∏£‡∏≤","‡∏ô‡πâ‡∏≥‡∏°‡∏∞‡∏ï‡∏π‡∏°",
  "‡∏õ‡∏•‡∏≤‡∏´‡∏ß‡∏≤‡∏ô","‡∏õ‡∏•‡∏≤‡∏¢‡∏≠","‡∏õ‡∏•‡∏≤‡∏ö‡∏î‡∏ä‡∏∏‡∏õ‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡∏õ‡πà‡∏ô","‡∏ô‡πâ‡∏≥‡∏û‡∏£‡∏¥‡∏Å‡πÄ‡∏ú‡∏≤‡πÄ‡∏´‡πá‡∏î","‡πÄ‡∏´‡πá‡∏î‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå","‡πÄ‡∏¢‡∏•‡∏•‡∏µ‡πà‡πÄ‡∏´‡πá‡∏î‡∏´‡∏π‡∏´‡∏ô‡∏π","‡∏Ç‡πâ‡∏≤‡∏ß‡πÄ‡∏Å‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏´‡πá‡∏î",
  "‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡∏≠‡∏ö‡πÄ‡∏ô‡∏¢","‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£","‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡∏â‡∏≤‡∏ö","‡∏Ç‡∏ô‡∏∏‡∏ô‡∏ó‡∏≠‡∏î‡∏Å‡∏£‡∏≠‡∏ö"
];

const REMOVE_MARKS = /[\u0E31\u0E34-\u0E37\u0E38-\u0E39\u0E47\u0E4C\u0E48-\u0E4B]/g;
function toSiteSlug(thaiName){
  return thaiName.normalize('NFC')
    .replace(REMOVE_MARKS,'')
    .replace(/\s+/g,'');
}

const grid = document.getElementById('grid');
const searchInput = document.getElementById('searchInput');

function render(list = items) {
  if (list.length === 0) {
    grid.innerHTML = `<p class="hint" style="text-align:center; grid-column:1/-1;">‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</p>`;
    return;
  }
  grid.innerHTML = list.map((name, i) => {
    // ‡∏´‡∏≤ index ‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
    const originalIndex = items.indexOf(name) + 1;
    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏•‡∏Ç‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô 3 ‡∏´‡∏•‡∏±‡∏Å (001) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô
    const formattedIndex = String(originalIndex).padStart(3, '0');
    return `
      <button class="item" data-name="${name}">
        <span class="num">${formattedIndex}</span>
        <span class="item-name">${name}</span>
      </button>
    `;
  }).join('');
}

function applySearch() {
  const searchTerm = searchInput.value.trim().toLowerCase();
  if (!searchTerm) {
    render(items);
    return;
  }
  const filteredItems = items.filter(item => 
    item.toLowerCase().includes(searchTerm)
  );
  render(filteredItems);
}

searchInput.addEventListener('input', applySearch);

grid.addEventListener('click', e => {
  const btn = e.target.closest('.item'); 
  if (!btn) return;
  const name = btn.dataset.name;
  const slug = toSiteSlug(name);
  const url  = `${BASE_URL}/${slug}`;
  window.open(url, '_blank');
});

// Initial render
render();


/* =========================================
   2. ‡∏™‡πà‡∏ß‡∏ô Chatbot AI (Backend)
   ========================================= */
const BACKEND_URL = 'https://us-central1-law-ai-14740.cloudfunctions.net/api/chat';

// System Prompt: ‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏£‡∏£‡∏π‡∏õ‡∏≠‡∏≤‡∏´‡∏≤‡∏£
const SYSTEM_PROMPT = {
    role: "user",
    parts: [{ text: "System Instruction: ‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠ AI ‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏î‡πâ‡∏≤‡∏ô '‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏£‡∏£‡∏π‡∏õ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ñ‡∏ô‡∏≠‡∏°‡∏≠‡∏≤‡∏´‡∏≤‡∏£' (Food Processing Expert) ‡∏°‡∏µ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏™‡∏π‡∏ï‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏õ‡∏£‡∏£‡∏π‡∏õ, ‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏Å‡∏≤‡∏£‡∏ñ‡∏ô‡∏≠‡∏°‡∏≠‡∏≤‡∏´‡∏≤‡∏£ (‡∏î‡∏≠‡∏á, ‡∏Å‡∏ß‡∏ô, ‡∏ï‡∏≤‡∏Å‡πÅ‡∏´‡πâ‡∏á, ‡πÅ‡∏ä‡πà‡∏≠‡∏¥‡πà‡∏°), ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö, ‡∏™‡∏∏‡∏Ç‡∏≠‡∏ô‡∏≤‡∏°‡∏±‡∏¢‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï ‡πÅ‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå ‡∏ï‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏†‡∏≤‡∏©‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏†‡∏≤‡∏û ‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢" }]
};
const SYSTEM_ACK = {
    role: "model",
    parts: [{ text: "‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ú‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏î‡πâ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏£‡∏£‡∏π‡∏õ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö" }]
};

let chatHistory = [SYSTEM_PROMPT, SYSTEM_ACK];

const chatHistoryEl = document.getElementById('chat-history');
const userInput = document.getElementById('user-input');
const sendBtn = document.getElementById('send-btn');
const newChatBtn = document.getElementById('new-chat-btn');
const thinkingIndicator = document.getElementById('thinking-indicator');

function addChatBubble(message, isUser = true) {
    const bubbleType = isUser ? 'user' : 'model';
    const icon = isUser ? 'üë§' : 'ü§ñ';
    const bgClass = isUser ? 'bg-[#f59e0b] text-[#1f2937] font-semibold' : 'bg-white text-gray-800 border border-gray-200';
    
    const wrap = document.createElement('div');
    wrap.className = `flex items-start space-x-2 ${isUser ? 'flex-row-reverse space-x-reverse' : ''}`;
    
    const bubble = document.createElement('div');
    bubble.className = `chat-bubble chat-bubble-${bubbleType} ${bgClass} p-3 rounded-lg max-w-lg relative shadow-sm`;
    bubble.innerHTML = `<p>${message.replace(/\n/g, '<br>')}</p>`;
    
    wrap.innerHTML = `<span class="text-2xl">${icon}</span>`;
    wrap.appendChild(bubble);
    
    chatHistoryEl.appendChild(wrap);
    chatHistoryEl.scrollTop = chatHistoryEl.scrollHeight;
}

function addChatError(message) {
    const w = document.createElement('div');
    w.className = 'flex justify-center my-2';
    w.innerHTML = `<span class="bg-red-100 text-red-700 text-xs font-semibold px-3 py-1 rounded-full">${message}</span>`;
    chatHistoryEl.appendChild(w);
    chatHistoryEl.scrollTop = chatHistoryEl.scrollHeight;
}

function setThinking(on) {
    thinkingIndicator.classList.toggle('hidden', !on);
    if (on) chatHistoryEl.scrollTop = chatHistoryEl.scrollHeight;
}

async function handleSend() {
    const message = (userInput.value || '').trim();
    if (!message) return;

    addChatBubble(message, true);
    userInput.value = '';
    setThinking(true);
    sendBtn.disabled = true;

    chatHistory.push({ role: "user", parts: [{ text: message }] });

    try {
        const response = await fetch(BACKEND_URL, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ history: chatHistory }) 
        });

        if (!response.ok) {
            const errData = await response.json();
            throw new Error(errData.error || `Server error: ${response.status}`);
        }

        const data = await response.json(); 
        const aiReply = data.reply;

        chatHistory.push({ role: "model", parts: [{ text: aiReply }] });
        setThinking(false);
        addChatBubble(aiReply, false);

    } catch (err) {
        console.error("Fetch Error:", err);
        setThinking(false);
        addChatError(`‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ${err.message}`);
        chatHistory.pop();
    } finally {
        sendBtn.disabled = false;
    }
}

sendBtn.addEventListener('click', handleSend);
userInput.addEventListener('keydown', e => {
    if (e.key === 'Enter') handleSend();
});

// Reset Chat
newChatBtn.addEventListener('click', () => {
    chatHistory = [SYSTEM_PROMPT, SYSTEM_ACK];
    chatHistoryEl.innerHTML = `
        <div class="flex items-start space-x-2">
        <span class="text-2xl">ü§ñ</span>
        <div class="chat-bubble chat-bubble-model bg-white text-gray-800 p-3 rounded-lg max-w-lg relative border border-gray-200 shadow-sm">
            <p>‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏ô‡∏ó‡∏ô‡∏≤‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏£‡∏£‡∏π‡∏õ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö</p>
        </div>
        </div>`;
    userInput.value = '';
    setThinking(false);
});

// Modal Control
const fabToggle = document.getElementById('fab-chat-toggle');
const chatModal = document.getElementById('chatbot-modal');
const chatbotCloseBtn = document.getElementById('chatbot-close-btn');

fabToggle.addEventListener('click', () => {
    chatModal.classList.remove('chatbot-hidden');
    fabToggle.style.opacity = '0';
});
chatbotCloseBtn.addEventListener('click', () => {
    chatModal.classList.add('chatbot-hidden');
    fabToggle.style.opacity = '1';
});
</script>

</body>
</html>
