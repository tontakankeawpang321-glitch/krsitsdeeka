<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏†‡∏≤‡∏©‡∏≤‡∏°‡∏∑‡∏≠ - ‡∏â‡∏ö‡∏±‡∏ö‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Mali (‡∏•‡∏≤‡∏¢‡∏°‡∏∑‡∏≠‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å) & Prompt -->
    <link href="https://fonts.googleapis.com/css2?family=Mali:wght@300;500;700&family=Prompt:wght@300;400;600&display=swap" rel="stylesheet">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        body {
            font-family: 'Prompt', sans-serif;
            background-color: #fff7ed; /* ‡∏™‡πâ‡∏°‡∏≠‡πà‡∏≠‡∏ô‡πÜ ‡∏Ñ‡∏£‡∏µ‡∏°‡πÜ */
            background-image: radial-gradient(#fed7aa 1px, transparent 1px);
            background-size: 20px 20px;
        }
        h1, h2, h3, .cute-font {
            font-family: 'Mali', cursive;
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #fff7ed; 
        }
        ::-webkit-scrollbar-thumb {
            background: #fdba74; 
            border-radius: 10px;
        }

        /* Animations */
        @keyframes popIn {
            0% { transform: scale(0.9); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        .modal-content {
            animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(234, 88, 12, 0.15);
        }
        /* Loading Spinner */
        .loader {
            border: 4px solid #fff7ed;
            border-top: 4px solid #f97316;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="text-gray-700 min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-30 shadow-sm border-b border-orange-100">
        <div class="max-w-5xl mx-auto px-4 py-4 flex flex-col md:flex-row items-center justify-between gap-4">
            <div class="flex items-center gap-3">
                <div class="bg-orange-100 p-2 rounded-full text-orange-500">
                    <i data-lucide="hand" class="w-8 h-8"></i>
                </div>
                <h1 class="text-2xl md:text-3xl font-bold text-orange-600 cute-font">‡∏†‡∏≤‡∏©‡∏≤‡∏°‡∏∑‡∏≠‡∏´‡∏£‡∏£‡∏©‡∏≤</h1>
            </div>
            
            <!-- Search Bar -->
            <div class="relative w-full md:w-96">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <i data-lucide="search" class="w-5 h-5 text-orange-300"></i>
                </div>
                <input type="text" id="searchInput" 
                    class="block w-full pl-10 pr-3 py-2 border-2 border-orange-100 rounded-full leading-5 bg-white placeholder-orange-200 focus:outline-none focus:border-orange-400 focus:ring-2 focus:ring-orange-200 transition-all duration-300 cute-font" 
                    placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå... (‡πÄ‡∏ä‡πà‡∏ô ‡∏Å ‡πÑ‡∏Å‡πà)">
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-4 py-8 max-w-5xl">
        
        <!-- Welcome Message -->
        <div class="text-center mb-10">
            <h2 class="text-xl text-orange-800 cute-font mb-2">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡πÇ‡∏•‡∏Å‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ</h2>
            <p class="text-gray-500 text-sm">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏™‡∏≤‡∏ò‡∏¥‡∏ï</p>
        </div>

        <!-- Loading State -->
        <div id="loadingState" class="text-center py-12 hidden">
            <div class="loader mb-4"></div>
            <p class="cute-font text-orange-400">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏à‡πâ‡∏≤...</p>
        </div>

        <!-- Cards Grid -->
        <div id="cardGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Content will be injected here by JS -->
        </div>

        <!-- No Results State -->
        <div id="noResults" class="hidden text-center py-12">
            <div class="bg-white p-6 rounded-3xl inline-block shadow-sm">
                <i data-lucide="frown" class="w-12 h-12 mx-auto text-orange-300 mb-2"></i>
                <p class="cute-font text-lg text-gray-500">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ñ‡∏≥‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏à‡πâ‡∏≤</p>
            </div>
        </div>

        <!-- Error State -->
         <div id="errorState" class="hidden text-center py-12">
            <div class="bg-red-50 p-6 rounded-3xl inline-block shadow-sm border border-red-100">
                <i data-lucide="alert-circle" class="w-12 h-12 mx-auto text-red-400 mb-2"></i>
                <p class="cute-font text-lg text-red-500">‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</p>
                <p class="text-sm text-red-400 mt-1">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏ü‡∏•‡πå signs500.json</p>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="text-center py-6 text-orange-300 text-sm cute-font">
        <p>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å üß° ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ</p>
    </footer>

    <!-- Modal / Dialog -->
    <div id="detailModal" class="fixed inset-0 z-50 hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <!-- Backdrop -->
        <div class="fixed inset-0 bg-orange-900/20 backdrop-blur-sm transition-opacity" onclick="closeModal()"></div>

        <!-- Modal Panel -->
        <div class="fixed inset-0 z-10 overflow-y-auto">
            <div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0">
                <div class="relative transform overflow-hidden rounded-3xl bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg modal-content border-4 border-orange-100">
                    
                    <!-- Close Button -->
                    <button onclick="closeModal()" class="absolute top-4 right-4 bg-orange-100 hover:bg-orange-200 text-orange-500 rounded-full p-1 transition-colors z-10">
                        <i data-lucide="x" class="w-6 h-6"></i>
                    </button>

                    <!-- Content -->
                    <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
                        <div class="flex flex-col items-center">
                            
                            <!-- Image Header -->
                            <div class="w-full h-48 bg-orange-50 rounded-2xl overflow-hidden mb-4 relative group">
                                <img id="modalImage" src="" alt="Sign Language" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105">
                                <div class="absolute bottom-2 right-2 bg-white/90 px-3 py-1 rounded-full text-xs font-bold text-orange-500 shadow-sm" id="modalCategory">
                                    Category
                                </div>
                            </div>

                            <!-- Title -->
                            <h3 id="modalTitle" class="text-3xl font-bold text-orange-600 cute-font mb-1"></h3>
                            <p id="modalWordEn" class="text-sm text-gray-400 font-medium mb-4"></p>

                            <!-- Description Box -->
                            <div class="w-full bg-orange-50/50 rounded-xl p-4 mb-3 border border-orange-100">
                                <h4 class="text-sm font-bold text-orange-400 mb-1 cute-font flex items-center gap-1">
                                    <i data-lucide="book-open" class="w-4 h-4"></i> ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏≥
                                </h4>
                                <p id="modalDesc" class="text-gray-600 text-sm leading-relaxed"></p>
                                <p id="modalDescEn" class="text-gray-400 text-xs mt-2 italic border-t border-orange-100 pt-2"></p>
                            </div>

                            <!-- Tip Box -->
                            <div class="w-full bg-yellow-50 rounded-xl p-3 mb-4 border border-yellow-100 flex gap-3 items-start">
                                <div class="bg-yellow-100 p-1.5 rounded-full text-yellow-500 mt-0.5 shrink-0">
                                    <i data-lucide="lightbulb" class="w-4 h-4"></i>
                                </div>
                                <div>
                                    <span class="text-xs font-bold text-yellow-600 block mb-0.5">‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≥</span>
                                    <p id="modalTip" class="text-yellow-800 text-sm"></p>
                                </div>
                            </div>

                            <!-- YouTube Embed -->
                            <div class="w-full rounded-xl overflow-hidden shadow-sm aspect-video bg-black relative">
                                <iframe id="modalYoutube" class="w-full h-full" src="" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                            </div>
                            
                            <a id="modalYoutubeLink" href="#" target="_blank" class="mt-3 flex items-center gap-2 text-xs text-orange-400 hover:text-orange-600 transition-colors">
                                <i data-lucide="external-link" class="w-3 h-3"></i> ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ô YouTube
                            </a>

                        </div>
                    </div>
                    
                    <!-- Footer Actions -->
                    <div class="bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
                        <button type="button" onclick="closeModal()" class="inline-flex w-full justify-center rounded-full bg-orange-500 px-6 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-600 sm:ml-3 sm:w-auto transition-all hover:shadow-lg hover:-translate-y-0.5">
                            ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏•‡πâ‡∏ß‡∏à‡πâ‡∏≤
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 1. Data Setup & Global Variables
        let vocabData = []; // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ß‡πà‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å JSON
        
        // Element References
        const cardGrid = document.getElementById('cardGrid');
        const searchInput = document.getElementById('searchInput');
        const noResults = document.getElementById('noResults');
        const loadingState = document.getElementById('loadingState');
        const errorState = document.getElementById('errorState');
        const modal = document.getElementById('detailModal');

        // 2. Fetch Data Function (‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå signs500.json)
        async function loadData() {
            // Show loading
            loadingState.classList.remove('hidden');
            cardGrid.innerHTML = '';
            
            try {
                // Fetch data from external file
                const response = await fetch('signs500.json');
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                vocabData = await response.json();
                
                // Hide loading, Show content
                loadingState.classList.add('hidden');
                renderCards(vocabData);
                
            } catch (error) {
                console.error("Error loading JSON:", error);
                loadingState.classList.add('hidden');
                errorState.classList.remove('hidden');
                lucide.createIcons(); // Re-init icons for error state
            }
        }

        // 3. Render Function
        function renderCards(items) {
            cardGrid.innerHTML = '';
            
            if (items.length === 0) {
                noResults.classList.remove('hidden');
                return;
            } else {
                noResults.classList.add('hidden');
            }

            items.forEach(item => {
                const card = document.createElement('div');
                card.className = 'bg-white rounded-3xl shadow-sm border border-orange-100 overflow-hidden cursor-pointer card-hover transition-all duration-300';
                card.onclick = () => openModal(item);

                // Handle missing image
                const imgUrl = item.imageUrl || 'https://placehold.co/600x400/fff7ed/ea580c?text=No+Image';

                card.innerHTML = `
                    <div class="h-48 overflow-hidden bg-orange-50 relative">
                        <img src="${imgUrl}" alt="${item.word}" class="w-full h-full object-cover" onerror="this.src='https://placehold.co/600x400/f3f4f6/9ca3af?text=Image+Error'">
                        <div class="absolute top-3 right-3 bg-white/90 backdrop-blur-sm px-2 py-1 rounded-lg text-xs font-bold text-orange-400 shadow-sm">
                            ${item.category || '‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ'}
                        </div>
                    </div>
                    <div class="p-5">
                        <h3 class="text-2xl font-bold text-gray-800 cute-font mb-1">${item.word}</h3>
                        <p class="text-xs text-orange-400 font-medium mb-3 uppercase tracking-wide">${item.word_en ? item.word_en.split('‚Äì')[0] : ''}</p>
                        <p class="text-gray-500 text-sm line-clamp-2">${item.description}</p>
                        
                        <div class="mt-4 flex items-center justify-between">
                            <span class="text-xs bg-orange-50 text-orange-600 px-3 py-1 rounded-full font-medium">
                                ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏î‡∏π‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏≥
                            </span>
                            <div class="bg-orange-500 rounded-full p-1.5 text-white">
                                <i data-lucide="play" class="w-4 h-4 fill-current"></i>
                            </div>
                        </div>
                    </div>
                `;
                cardGrid.appendChild(card);
            });
            
            // Re-initialize icons for new elements
            lucide.createIcons();
        }

        // 4. Search Function
        searchInput.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            const filteredData = vocabData.filter(item => 
                (item.word && item.word.toLowerCase().includes(searchTerm)) || 
                (item.word_en && item.word_en.toLowerCase().includes(searchTerm)) ||
                (item.description && item.description.includes(searchTerm))
            );
            renderCards(filteredData);
        });

        // 5. Modal Logic
        function openModal(item) {
            // Populate Data
            document.getElementById('modalTitle').innerText = item.word || '';
            document.getElementById('modalWordEn').innerText = item.word_en || '';
            document.getElementById('modalCategory').innerText = item.category || '‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ';
            document.getElementById('modalDesc').innerText = item.description || '';
            document.getElementById('modalDescEn').innerText = item.description_en || '';
            document.getElementById('modalTip').innerText = item.tip || '-';
            
            const modalImg = document.getElementById('modalImage');
            modalImg.src = item.imageUrl || 'https://placehold.co/600x400/fff7ed/ea580c?text=No+Image';
            modalImg.onerror = function() { this.src = 'https://placehold.co/600x400/f3f4f6/9ca3af?text=Image+Error'; };
            
            document.getElementById('modalYoutubeLink').href = item.youtubeUrl || '#';

            // Handle YouTube Embed
            let embedUrl = "";
            if (item.youtubeUrl) {
                if(item.youtubeUrl.includes("shorts")) {
                    const parts = item.youtubeUrl.split('/shorts/');
                    if(parts.length > 1) {
                        const videoId = parts[1].split('?')[0];
                        embedUrl = `https://www.youtube.com/embed/${videoId}?autoplay=1&mute=0`;
                    }
                } else if (item.youtubeUrl.includes("watch?v=")) {
                    const videoId = item.youtubeUrl.split('v=')[1].split('&')[0];
                    embedUrl = `https://www.youtube.com/embed/${videoId}?autoplay=1&mute=0`;
                }
            }
            
            document.getElementById('modalYoutube').src = embedUrl;

            // Show Modal
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden'; 
        }

        function closeModal() {
            modal.classList.add('hidden');
            document.getElementById('modalYoutube').src = ""; 
            document.body.style.overflow = 'auto'; 
        }

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && !modal.classList.contains('hidden')) {
                closeModal();
            }
        });

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÇ‡∏î‡∏¢‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        loadData();
        
        // Init icons (for initial static elements)
        lucide.createIcons();
    </script>
</body>
</html>
